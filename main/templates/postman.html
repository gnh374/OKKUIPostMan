
<!DOCTYPE html>
<html lang="en">
<head>
    <style>
        #form{
            width: 90%;
            margin: auto;
        }
        body{
            text-align: center;
        }
        h3{
            text-align: left;
         
        }
        #jsonInput {
            margin: 10px auto;
            width: 100%; /* Make the textarea fill the width of the form */
            height: 30vh; /* 50% of the viewport height */
        }
        #method{
            width: 10%;
            height:20px;
        }
        #product{
            width: 10%;
            height:20px; 
        }
        #header{
            width: 20%; 
            height:15px;
        }
        h4{
            display: inline;
            width:45%
        }
        #response{
            height: 70vh;
            width: 90%; 
            margin: 10px auto;
        }
        #jsonData{
            border: 1px solid black;
            height: 100%;
            width: 100%; 
            text-align: left;
           
        }
        #jsonData {
            white-space: pre-wrap;
            word-wrap: break-word;
            font-family: monospace;
            overflow: auto;
        }
    </style>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>OKK UI meets Postman</title>
</head>
<body>
        <h1> OKK UI meets Postman </h1>
        <form method="post" id="form">
            {% csrf_token %}
            <select id="method" name="method">
                <option>Select an option</option>
                <option value="GET"> GET</option>
                <option value="POST">POST</option>
                <option value="PUT">PUT</option>
                <option value="DELETE">DELETE</option>
            </select>
            <h4>http://localhost:8000/</h4>
            <select id="product" name="product">
                <option>Select an option</option>
                <option value="Acara">api/acara/</option>
                <option value="Add_Pembicara">api/add-pembicara/</option>
                <option value="Sponsor">api/sponsor/</option>
                <option value="Panitia">api/panitia/</option>
                <option value="PI">api/pi/</option>
                <option value="BPH">api/bph/</option>
                <option value="Rapat">api/rapat/</option>
                <option value="Kelompok">api/kelompok/</option>
                <option value="Mentor">api/mentor/</option>
                <option value="Mentee">api/mentee/</option>
                <option value="Mentoring">api/mentoring/</option>
                <option value="Absen_Mentoring">api/hadir-mentoring/</option>
     
        
            </select>
            <input id="header" name="header" placeholder="param">
            <button type="submit">Send</button>
            <div id="bodyRequest">
                <h3> Body</h3>
                <textarea placeholder="input valid json format" id="jsonInput" rows="10" cols="50"></textarea>
            </div>
        </form>
        <div id="response">
        <h3> Response </h3>
        <div id="jsonData"></div>
        </div>
<script>
            document.getElementById("form").addEventListener("submit", async function(event) {
            event.preventDefault(); 
            const method = document.getElementById("method").value;
            const product = document.getElementById("product").value;
            const pk = document.getElementById("header").value;
            if(method=="GET"){
                const jsonData = await getJsonData(product, pk);
                document.getElementById("jsonData").innerText = JSON.stringify(jsonData, null, 4);
            }
            else if (method=="POST"){
                if (product=="Acara"){
                    addAcara()
                }
                else if (product=="Divisi PI"){
                    addDivisiPI()
                }
                else if (product=="PI"){
                    addPI()
                }
                else if (product=="BPH"){
                    addBPH()
                }
                else if (product=="Mentor"){
                    addMentor()
                }
                else if (product=="Kelompok"){
                    addKelompok()
                }
                else if (product=="Mentee"){
                    addMentee()
                }
                else if (product=="Mentoring"){
                    addMentoring()
                }
                else if (product=="Sponsor"){
                    addSponsor()
                }
                else if (product=="Rapat"){
                    addRapat()
                }
               
               
            }
            else if (method=="PUT"){
                if (product=="Acara"){
                    putAcara(pk)
                }
                else if (product=="Mentor"){
                    putMentor(pk)
                }
                else if (product=="Mentee"){
                    putMentee(pk)
                }
                else if (product=="BPH"){
                    putBPH(pk)
                }
                else if (product=="Sponsor"){
                    putSponsor(pk)
                }
                else if (product=="Mentoring"){
                    putMentoring(pk)
                }
                else if (product=="PI"){
                    putPI(pk)
                }
                else if (product=="Add_Pembicara"){
                    addPembicaraAcara(pk)
                }
                else if (product=="Absen_Mentoring"){
                    hadirMentoring(pk)
                }
            }
            else if (method=="DELETE"){
                if (product=="Acara"){
                    deleteAcara(pk)
                }
                else if (product=="Mentor"){
                    deleteMentor(pk)
                }
                else if (product=="Mentee"){
                    deleteMentee(pk)
                }
                else if (product=="BPH"){
                    deleteBPH(pk)
                }
                else if (product=="Sponsor"){
                    deleteSponsor(pk)
                }
                else if (product=="Mentoring"){
                    deleteMentoring(pk)
                }
                else if (product=="Absen_Mentoring"){
                    deleteHadirMentoring(pk)
                }
                else if (product=="Add_Pembicara"){
                    deletePembicara(pk)
                }
                else if (product=="PI"){
                    deletePI(pk)
                }
            }
           
        });
        
        function addAcara() {
            fetch("{% url 'main:acara' %}", {
                method: "POST",
                body: document.querySelector('#jsonInput').value
            }).then(response => {
                if (response.ok) {
                    return response.json(); 
                } else {
                    return response.json().then(data => {
                    throw new Error(data.error);
            });
                }
            }).then(data => {
                document.getElementById("jsonData").textContent = JSON.stringify(data, null, 2); 
            }).catch(error => {
                console.error('Terjadi kesalahan: ', error);
            });

            // 
            return false
        }
        function addMentee() {
            fetch("{% url 'main:mentee' %}", {
                method: "POST",
                body: document.querySelector('#jsonInput').value
            }).then(response => {
                if (response.ok) {
                    return response.json(); 
                } else {
                    return response.json().then(data => {
                    throw new Error(data.error);
            });
                }
            }).then(data => {
                document.getElementById("jsonData").textContent = JSON.stringify(data, null, 2); 
            }).catch(error => {
                console.error('Terjadi kesalahan: ', error);
            });

            // 
            return false
        }
        function addKelompok() {
            fetch("{% url 'main:kelompok' %}", {
                method: "POST",
            }).then(response => {
                if (response.ok) {
                    return response.json(); 
                } else {
                    return response.json().then(data => {
                    throw new Error(data.error);
            });
                }
            }).then(data => {
                document.getElementById("jsonData").textContent = JSON.stringify(data, null, 2);  
            }).catch(error => {
                console.error('Terjadi kesalahan:', error);
            });

            
            return false
        }
        
        function addMentoring() {
            fetch("{% url 'main:mentoring' %}", {
                method: "POST",
                body: document.querySelector('#jsonInput').value
            }).then(response => {
                if (response.ok) {
                    return response.json(); 
                } else {
                    return response.json().then(data => {
                    throw new Error(data.error);
            });
                }
            }).then(data => {
                document.getElementById("jsonData").textContent = JSON.stringify(data, null, 2); 
            }).catch(error => {
                console.error('Terjadi kesalahan:', error);
            });

            
            return false
        }
        function addRapat() {
            fetch("{% url 'main:rapat' %}", {
                method: "POST",
                body: document.querySelector('#jsonInput').value
            }).then(response => {
                if (response.ok) {
                    return response.json(); 
                } else {
                    return response.json().then(data => {
                    throw new Error(data.error);
            });
                }
            }).then(data => {
                document.getElementById("jsonData").textContent = JSON.stringify(data, null, 2); 
            }).catch(error => {
                console.error('Terjadi kesalahan:', error);
            });

            
            return false
        }
        
        function addSponsor() {
            fetch("{% url 'main:sponsor' %}", {
                method: "POST",
                body: document.querySelector('#jsonInput').value
            }).then(response => {
                if (response.ok) {
                    return response.json(); 
                } else {
                    return response.json().then(data => {
                    throw new Error(data.error);
            });
                }
            }).then(data => {
                document.getElementById("jsonData").textContent = JSON.stringify(data, null, 2);  
            }).catch(error => {
                console.error('Terjadi kesalahan:', error);
            });

            
            return false
        }

     
        function addPI() {
            fetch("{% url 'main:pengurus_inti' %}", {
                method: "POST",
                body: document.querySelector('#jsonInput').value
            }).then(response => {
                if (response.ok) {
                    return response.json(); 
                } else {
                    return response.json().then(data => {
                    throw new Error(data.error);
            });
                }
            }).then(data => {
                document.getElementById("jsonData").textContent = JSON.stringify(data, null, 2); 
            }).catch(error => {
                console.error('Terjadi kesalahan:', error);
            });

            
            return false
        }
        function addBPH() {
            fetch("{% url 'main:bph' %}", {
                method: "POST",
                body: document.querySelector('#jsonInput').value
            }).then(response => {
                if (response.ok) {
                    return response.json(); 
                } else {
                    return response.json().then(data => {
                    throw new Error(data.error);
            });
                }
            }).then(data => {
                document.getElementById("jsonData").textContent = JSON.stringify(data, null, 2); 
            }).catch(error => {
                console.error('Terjadi kesalahan:', error);
            });
            return false
        }
        function addMentor() {
            fetch("{% url 'main:mentor' %}", {
                method: "POST",
                body: document.querySelector('#jsonInput').value
            }).then(response => {
                if (response.ok) {
                    return response.json(); 
                } else {
                    return response.json().then(data => {
                    throw new Error(data.error);
            });
                }
            }).then(data => {
                document.getElementById("jsonData").textContent = JSON.stringify(data, null, 2); 
            }).catch(error => {
                console.error('Terjadi kesalahan:', error);
            });

            
            return false
            
        }
        
        function hadirMentoring(header) {
            fetch(`api/hadir-mentoring/${header}`, {
                method: "PUT",
                body: document.querySelector('#jsonInput').value
            }).then(response => {
                if (response.ok) {
                    return response.json(); 
                } else {
                    return response.json().then(data => {
                    throw new Error(data.error);
            });
                }
            }).then(data => {
                document.getElementById("jsonData").textContent = JSON.stringify(data, null, 2);  
            }).catch(error => {
                console.error('Terjadi kesalahan:', error);
            });

            
            return false
            
        }

        function addPembicaraAcara(header) {
            fetch(`api/add-pembicara/${header}`, {
                method: "PUT",
                body: document.querySelector('#jsonInput').value
            }).then(response => {
                if (response.ok) {
                    return response.json(); 
                } else {
                    return response.json().then(data => {
                    throw new Error(data.error);
            });
                }
            }).then(data => {
                document.getElementById("jsonData").textContent = JSON.stringify(data, null, 2); 
            }).catch(error => {
                console.error('Terjadi kesalahan:', error);
            });

            
            return false
            
        }
        function putAcara(acara) {
            fetch(`api/acara/${acara}`, {
                method: "PUT",
                body: document.querySelector('#jsonInput').value
            }).then(response => {
                if (response.ok) {
                    return response.json(); 
                } else {
                    return response.json().then(data => {
                    throw new Error(data.error);
            });
                }
            }).then(data => {
                document.getElementById("jsonData").textContent = JSON.stringify(data, null, 2); 
            }).catch(error => {
                console.error('Terjadi kesalahan:', error);
            });

            
            return false
            
        }
        function putMentor(npm) {
            fetch(`api/mentor/${npm}`, {
                method: "PUT",
                body: document.querySelector('#jsonInput').value
            }).then(response => {
                if (response.ok) {
                    return response.json(); 
                } else {
                    return response.json().then(data => {
                    throw new Error(data.error);
            });
                }
            }).then(data => {
                document.getElementById("jsonData").textContent = JSON.stringify(data, null, 2); 
            }).catch(error => {
                console.error('Terjadi kesalahan:', error);
            });

            
            return false
            
        }
        function putPI(header) {
            fetch(`api/pi/${header}`, {
                method: "PUT",
                body: document.querySelector('#jsonInput').value
            }).then(response => {
                if (response.ok) {
                    return response.json(); 
                } else {
                    return response.json().then(data => {
                    throw new Error(data.error);
            });
                }
            }).then(data => {
                document.getElementById("jsonData").textContent = JSON.stringify(data, null, 2); 
            }).catch(error => {
                console.error('Terjadi kesalahan:', error);
            });

            
            return false
            
        }
        function putSponsor(header) {
            console.log("masuk")
            fetch(`api/sponsor/${header}`, {
                method: "PUT",
                body: document.querySelector('#jsonInput').value
            }).then(response => {
                if (response.ok) {
                    return response.json(); 
                } else {
                    return response.json().then(data => {
                    throw new Error(data.error);
            });
                }
            }).then(data => {
                document.getElementById("jsonData").textContent = JSON.stringify(data, null, 2); 
            }).catch(error => {
                console.error('Terjadi kesalahan:', error);
            });

            
            return false
            
        }
        function putMentee(npm) {
            fetch(`api/mentee/${npm}`, {
                method: "PUT",
                body: document.querySelector('#jsonInput').value
            }).then(response => {
                if (response.ok) {
                    return response.json(); 
                } else {
                    return response.json().then(data => {
                    throw new Error(data.error);
            });
                }
            }).then(data => {
                document.getElementById("jsonData").textContent = JSON.stringify(data, null, 2); 
            }).catch(error => {
                console.error('Terjadi kesalahan:', error);
            });

            document.getElementById("form").rest()
            return false
            
        }

        function putBPH(npm) {
            fetch(`api/bph/${npm}`, {
                method: "PUT",
                body: document.querySelector('#jsonInput').value
            }).then(response => {
                if (response.ok) {
                    return response.json(); 
                } else {
                    return response.json().then(data => {
                    throw new Error(data.error);
            });
                }
            }).then(data => {
                document.getElementById("jsonData").textContent = JSON.stringify(data, null, 2); 
            }).catch(error => {
                console.error('Terjadi kesalahan:', error);
            });

            
            return false
            
        }
        function putMentoring(header) {
            fetch(`api/mentoring/${header}`, {
                method: "PUT",
                body: document.querySelector('#jsonInput').value
            }).then(response => {
                if (response.ok) {
                    return response.json(); 
                } else {
                    return response.json().then(data => {
                    throw new Error(data.error);
            });
                }
            }).then(data => {
                document.getElementById("jsonData").textContent = JSON.stringify(data, null, 2); 
            }).catch(error => {
                console.error('Terjadi kesalahan:', error);
            });

            
            return false
            
        }
        function deleteAcara(acara) {
            fetch(`api/acara/${acara}`, {
                method: "DELETE",
            }).then(response => {
                if (response.ok) {
                    return response.json(); 
                } else {
                    return response.json().then(data => {
                    throw new Error(data.error);
            });
                }
            }).then(data => {
                document.getElementById("jsonData").textContent = JSON.stringify(data, null, 2); 
            }).catch(error => {
                console.error('Terjadi kesalahan:', error);
            });

            
            return false
            
        }
        function deleteMentoring(acara) {
            fetch(`api/mentoring/${acara}`, {
                method: "DELETE",
            }).then(response => {
                if (response.ok) {
                    return response.json(); 
                } else {
                    return response.json().then(data => {
                    throw new Error(data.error);
            });
                }
            }).then(data => {
                document.getElementById("jsonData").textContent = JSON.stringify(data, null, 2); 
            }).catch(error => {
                console.error('Terjadi kesalahan:', error);
            });

            
            return false
            
        }
        function deleteSponsor(header) {
            fetch(`api/sponsor/${header}`, {
                method: "DELETE",
            }).then(response => {
                if (response.ok) {
                    return response.json(); 
                } else {
                    return response.json().then(data => {
                    throw new Error(data.error);
            });
                }
            }).then(data => {
                document.getElementById("jsonData").textContent = JSON.stringify(data, null, 2); 
            }).catch(error => {
                console.error('Terjadi kesalahan:', error);
            });

            
            return false
            
        }
        function deletePembicara(header) {
            fetch(`api/add-pembicara/${header}`, {
                method: "DELETE",
                body:document.getElementById("jsonInput").value
            }).then(response => {
                if (response.ok) {
                    return response.json(); 
                } else {
                    return response.json().then(data => {
                    throw new Error(data.error);
            });
                }
            }).then(data => {
                document.getElementById("jsonData").textContent = JSON.stringify(data, null, 2); 
            }).catch(error => {
                console.error('Terjadi kesalahan:', error);
            });

            
            return false
            
        }
        function deletePI(header) {
            fetch(`api/pi/${header}`, {
                method:'DELETE'
            }).then(response => {
                if (response.ok) {
                    return response.json(); 
                } else {
                    return response.json().then(data => {
                    throw new Error(data.error);
            });
                }
            }).then(data => {
                document.getElementById("jsonData").textContent = JSON.stringify(data, null, 2); 
            }).catch(error => {
                console.error('Terjadi kesalahan:', error);
            });

            
            return false
            
        }
        function deleteMentee(npm) {
            fetch(`api/mentee/${npm}`, {
                method: "DELETE",
            }).then(response => {
                if (response.ok) {
                    return response.json(); 
                } else {
                    return response.json().then(data => {
                    throw new Error(data.error);
            });
                }
            }).then(data => {
                document.getElementById("jsonData").textContent = JSON.stringify(data, null, 2); 
            }).catch(error => {
                console.error('Terjadi kesalahan:', error);
            });

            
            return false
            
        }
        function deleteBPH(npm) {
            fetch(`api/bph/${npm}`, {
                method: "DELETE",
            }).then(response => {
                if (response.ok) {
                    return response.json(); 
                } else {
                    return response.json().then(data => {
                    throw new Error(data.error);
            });
                }
            }).then(data => {
                document.getElementById("jsonData").textContent = JSON.stringify(data, null, 2); 
            }).catch(error => {
                console.error('Terjadi kesalahan:', error);
            });

            
            return false
            
        }
        function deleteMentor(npm) {
            fetch(`api/mentor/${npm}`, {
                method: "DELETE",
            }).then(response => {
                if (response.ok) {
                    return response.json(); 
                } else {
                    return response.json().then(data => {
                    throw new Error(data.error);
            });
                }
            }).then(data => {
                document.getElementById("jsonData").textContent = JSON.stringify(data, null, 2); 
            }).catch(error => {
                console.error('Terjadi kesalahan:', error);
            });

            return false
            
        }
        function deleteHadirMentoring(header) {
            fetch(`api/hadir-mentoring/${header}`, {
                method: "DELETE",
                body: document.querySelector('#jsonInput').value
            }).then(response => {
                if (response.ok) {
                    return response.json(); 
                } else {
                    return response.json().then(data => {
                    throw new Error(data.error);
            });
                }
            }).then(data => {
                document.getElementById("jsonData").textContent = JSON.stringify(data, null, 2); 
            }).catch(error => {
                console.error('Terjadi kesalahan:', error);
            });

            return false
            
        }

        


        async function getJsonData(product,pk) {
            if (product=="Mentor"){
                return getMentors()
            }
            else if (product=="Acara"){
                return getAcara()
            }
            else if (product=="PI"){
                return getPI()
            }
            else if (product=="BPH"){
                return getBPH()
            }
            else if (product=="Panitia"){
                return getPanitia()
            }
            else if (product=="Kelompok"){
                return getKelompok()
            }
            else if (product=="Mentee"){
                return getMentees()
            }
            else if (product=="Sponsor"){
                return getSponsor()
            }
            else if (product=="Mentoring"){
                if(pk==""){
                    return getMetoring()
                }
                const result= await getMetoring_kelompok(pk)
                return result
                
            }
            else if (product=="Rapat"){
                const result= await getRapat(pk)
                return result
                
            }
            // else if (product=="Absen_Mentoring"){
            //     const result= await getHadirMentoring(pk)
            //     return result
                
            // }
            // else if (product=="Add_Pembicara"){
            //     const result= await getHadirMentoring(pk)
            //     return result
                
            // }
        
        }
        async function getMentors() { return fetch(`api/mentor/`).then((res) => res.json()) }
        async function getMentees() { return fetch(`api/mentee/`).then((res) => res.json()) }
        async function getAcara() { return fetch(`api/acara/`).then((res) => res.json()) }
        async function getPI() { return fetch(`api/pi/`).then((res) => res.json()) }
        async function getBPH() { return fetch(`api/bph/`).then((res) => res.json()) }
        async function getPanitia() { return fetch(`api/panitia/`).then((res) => res.json()) }
        async function getKelompok() { return fetch(`api/kelompok/`).then((res) => res.json()) }
        async function getSponsor() { return fetch(`api/sponsor/`).then((res) => res.json()) }
        async function getMetoring() { return fetch(`api/mentoring/`).then((res) => res.json()) }
        async function getMetoring_kelompok(kelompok) {
            return fetch(`api/mentoring/${kelompok}`, {
                method: "GET",
            }).then(response => {
                if (response.ok) {
                    return response.json();
                } else {
                    throw new Error('Gagal mengambil data');
                }
            }).catch(error => {
                console.error('Terjadi kesalahan:', error);
            });
            
        }
        async function getHadirMentoring(header) {
            return fetch(`api/hadir-mentoring/${header}`, {
                method: "GET",
            }).then(response => {
                if (response.ok) {
                    return response.json();
                } else {
                    throw new Error('Gagal mengambil data');
                }
            }).catch(error => {
                console.error('Terjadi kesalahan:', error);
            });
            
        }
        async function getRapat(divisi) {
            return fetch(`api/rapat/${divisi}`, {
                method: "GET",
            }).then(response => {
                if (response.ok) {
                    return response.json();
                } else {
                    throw new Error('Gagal mengambil data');
                }
            }).catch(error => {
                console.error('Terjadi kesalahan:', error);
            });
           
        }
</script>
</body>
</html>